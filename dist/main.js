var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"addTripEvent",(function(){return I})),n.d(t,"gatheringData",(function(){return w})),n.d(t,"addToBookList",(function(){return N})),n.d(t,"printCardBtn",(function(){return k}));const a=document.getElementById("caption"),r=document.getElementById("days"),i=document.getElementById("hours"),o=document.getElementById("minutes"),c=document.getElementById("seconds"),d=document.getElementById("countdown-section"),l=e=>{let t;switch(e){case"01":t="Jan";break;case"02":t="Feb";break;case"03":t="Mar";break;case"04":t="Apr";break;case"05":t="May";break;case"06":t="Jun";break;case"07":t="Jul";break;case"08":t="Aug";break;case"09":t="Sep";break;case 10:t="Oct";break;case 11:t="Nov";break;case 12:t="Dec";break;default:t="NAN"}return t};function s(e,t){let n,a,r,i=e.split("-"),o=parseInt(i[1]),c=parseInt(i[2]),d=parseInt(i[0]),l=t.split("-"),s=parseInt(l[1]),u=parseInt(l[2]),m=parseInt(l[0]),p=0;if(m>d)p=m-d,s>=o?(n=s-o,a=u-c):n=o-s;else if(m==d)if(p=0,s>=o){if(n=s-o,!(u>c))return a=c-u,12*p+30*n-a;a=u-c}else alert("invaild return date month");else alert("invaild return date year");return r=12*p+30*n+a,r}const u=document.getElementById("city"),m=document.getElementById("leaving-date"),p=document.getElementById("return-date"),y=document.getElementById("city-name"),h=document.getElementById("card-info"),f=document.getElementById("card-section"),v=(document.getElementById("card"),document.getElementById("btn")),g=document.getElementById("print-btn"),b=document.getElementById("clear-btn"),w=()=>{let e={cityName:u.value,leaving:m.value,returnDate:p.value};T(e).then(e=>{s(m.value,p.value)>7?async function(e,t){const n=`https://api.weatherbit.io/v2.0/forecast/daily?lat=${e}&lon=${t}&key=52cdeaaeea37459e847178fae7de0d57`;try{const e=await fetch(n),t=await e.json();let a=[{temp:t.data[0].temp,lowTemp:t.data[0].low_temp,maxTemp:t.data[0].max_temp,cityName:t.city_name,countryCode:t.country_code,description:t.data[0].weather.description},{temp:t.data[3].temp,lowTemp:t.data[3].low_temp,maxTemp:t.data[3].max_temp,date:t.data[3].valid_date,description:t.data[3].weather.description},{temp:t.data[8].temp,lowTemp:t.data[8].low_temp,maxTemp:t.data[8].max_temp,date:t.data[8].valid_date,description:t.data[8].weather.description}];(function(e){y.innerHTML=`${e[0].cityName}-${e[0].countryCode}`,h.innerHTML=`\n    <h2>Destination  - ${e[0].cityName}</h2>\n    <p>Start ${m.value} End ${p.value} </p>\n  <p id="duration">Duration ${s(m.value,p.value)} days</p>\n      <h2>Typical weather for then is</h2>\n      <p>Tempreture : ${e[0].temp}</p>\n      <p>Low-temperature  ${e[0].lowTemp} and the Max-temperature is ${e[0].maxTemp}</p>\n      <h2 class="desc">quick description</h2>\n      <p>${e[0].description}</p>\n    <hr>\n    <h2 class="more-info-title">more weather info ðŸ”½</h2>\n    <div class="more-info-container">\n    <div class="more-info first">\n       <h4>Typical weather for ${e[1].date}</h4>\n          <h5>Tempreture : ${e[1].temp}</h5>\n          <p>Low-temperature  ${e[1].lowTemp} and the Max-temperature is ${e[1].maxTemp}</p>\n       <h4 class="desc">quick description <br> ${e[1].description}</h4>\n       </div>\n       <div class="more-info">\n      <h4>Typical weather for ${e[2].date}</h4>\n        <h5>Tempreture : ${e[2].temp}</h5>\n        <p>Low-temperature  ${e[2].lowTemp} and the Max-temperature is ${e[1].maxTemp}</p>\n      <h4 class="desc">quick description <br> ${e[2].description}</h4>\n  </div>\n  </div>`,f.classList.remove("hidden")})(a)}catch(e){console.log(e)}}(e.latitude,e.longitude,e.cityName):async function(e,t){const n=`http://api.weatherbit.io/v2.0/current?lat=${e}&lon=${t}&key=52cdeaaeea37459e847178fae7de0d57`;try{const e=await fetch(n),t=await e.json();let a=[{temp:t.data[0].temp,cityName:t.data[0].timezone,countryCode:t.data[0].country_code,description:t.data[0].weather.description}];(function(e){y.innerHTML=`${u.value}-${e[0].countryCode}`,h.innerHTML=`\n    <h2>Destination  - ${e[0].cityName} \n    <p>Start ${m.value} End ${p.value} <br>Duration ${s(m.value,p.value)} days</p></h2>\n      <h3>Typical weather for then is</h3>\n      <h4>Tempreture : ${e[0].temp}</h4>\n      <h4 class="desc">quick description <br> ${e[0].description}</h4>\n     `,f.classList.remove("hidden")})(a)}catch(e){console.log(e)}}(e.latitude,e.longitude,e.cityName)}).then(()=>{!async function(){const e=`https://pixabay.com/api/?key=23698861-193854710cfb9e8a1a04fc94c&q=${u.value}&image_type=photo&editors_choice=true&per_page=3`,t=await fetch(e);let n=(await t.json()).hits[0].largeImageURL;$(n)}()}).catch(e=>{alert("Invalid location name, please try again."),console.log(e)})},T=async e=>{let t=await fetch("http://localhost:8081/postData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await t.json()}catch(e){console.log(e)}};const $=e=>{document.getElementById("city-image").setAttribute("src",e)};function E(e){if(!e.includes("-"))return alert("invalid date format make sure to use (-) in your format"),!1;{let t=e.split("-"),n=parseInt(t[1]),s=parseInt(t[2]);(e=>{setInterval(()=>{let t=e.month,n=e.year,d=`${l(t)} ${e.day}, ${n} 00:00:00`;let s=new Date(d).getTime()-(new Date).getTime();const u=Math.floor(s/864e5),m=Math.floor(s%864e5/36e5),p=Math.floor(s%36e5/6e4),y=Math.floor(s%6e4/1e3);a.innerHTML=`the trip is ${u} days away! ðŸ¤©`,r.innerHTML=u,i.innerHTML=m,o.innerHTML=p,c.innerHTML=y},1e3),d.classList.remove("hidden")})({month:n<10?"0"+n:n,day:s<10?"0"+s:s,year:parseInt(t[0])})}}const I=v.addEventListener("click",()=>{""==u.value||""==m.value||""==p.value?alert("invalid input  please try again"):(E(m.value),w())});b.addEventListener("click",()=>{u.value="",m.value="",p.value=""}),h.addEventListener("click",e=>{var t;(t=e.target).classList.contains("more-info-title")&&t.nextElementSibling.classList.toggle("show")});const k=g.addEventListener("click",()=>window.print()),L=document.getElementById("add-book-btn"),B=document.getElementById("book-list-body"),M=document.getElementById("city"),x=document.getElementById("leaving-date"),_=document.getElementById("return-date"),j=e=>{const t=Object.values(e);let n=document.createElement("tr");for(let e=0;e<t.length;e++){let a=document.createElement("td");3===e?a.innerHTML='<span href="#"class="btn btn-danger btn-sm delete">X</span':a.innerText=t[e],n.append(a)}B.append(n)},N=L.addEventListener("click",()=>{(()=>{let e={cityName:M.value,leaving:x.value,returnDate:_.value,btn:""};j(e)})()});B.addEventListener("click",e=>{var t;(t=e.target).classList.contains("delete")&&t.parentElement.parentElement.remove()});n(0),n(1),n(2),n(3),n(4),n(5),n(6)}]);